<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>T800 Ultra 2 - Smartwatch Premium</title>

    <style>
        body {
            font-family: "Segoe UI", Arial, sans-serif;
            margin: 0;
            background: #f0f4f8;
            color: #1a2a40;
        }

        header {
            background: linear-gradient(90deg, #1a2a40, #253f5a);
            padding: 20px;
            text-align: center;
            color: #fff;
        }

        header h1 {
            margin: 0;
            font-size: 26px;
            letter-spacing: 1px;
        }

        .menu {
            width: 100%;
            background: #1a2a40;
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 10px 0;
        }

        .menu button {
            background: #253f5a;
            color: #fff;
            border: none;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 14px;
        }

        .menu button:hover {
            background: #314e70;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
        }

        .produto-detalhes {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        .produto-detalhes img {
            width: 330px;
            border-radius: 12px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        }

        .info {
            max-width: 600px;
        }

        .info h2 {
            margin-top: 0;
            font-size: 28px;
        }

        .preco {
            font-size: 22px;
            color: #1a2a40;
            margin: 10px 0 20px;
            font-weight: bold;
        }

        .opcoes {
            margin-bottom: 20px;
        }

        select, input {
            padding: 10px;
            width: 100%;
            border-radius: 6px;
            border: 1px solid #253f5a;
            margin-bottom: 10px;
        }

        .btn-add {
            width: 100%;
            padding: 12px;
            background: #1a2a40;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }

        .btn-add:hover {
            background: #314e70;
        }

        .carrinho-container {
            margin-top: 40px;
        }

        .carrinho-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background: #fff;
            border-radius: 6px;
            box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 12px;
        }

        .carrinho-item button {
            background: #c62828;
            border: none;
            color: #fff;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .finalizar {
            margin-top: 20px;
            width: 100%;
            padding: 14px;
            background: #2e7d32;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
        }

        .finalizar:hover {
            background: #1b5e20;
        }
    </style>
</head>

<body>
<header>
    <h1>T800 Ultra 2 - Smartwatch Premium</h1>
</header>

<div class="menu">
    <button onclick="window.location.href='index.html'">Home</button>
    <button onclick="window.location.href='produtos.html'">Produtos</button>
    <button onclick="window.location.href='carrinho.html'">Carrinho</button>
    <button onclick="trocarConta()">Minha Conta</button>
</div>

<main class="container">
    <div class="produto-detalhes">
        <img src="https://down-br.img.susercontent.com/file/br-11134207-7r98o-ls7sbb9f0gj2de" alt="T800 Ultra 2">

        <div class="info">
            <h2>T800 Ultra 2</h2>
            <p class="preco">R$ 149,90</p>

            <div class="opcoes">
                <label for="cor">Selecione a cor:</label>
                <select id="cor">
                    <option value="Preto">Preto</option>
                    <option value="Branco">Branco</option>
                    <option value="Laranja">Laranja</option>
                </select>

                <label for="pulseira">Selecione a pulseira:</label>
                <select id="pulseira">
                    <option value="Esportiva">Esportiva</option>
                    <option value="A√ßo Inoxid√°vel">A√ßo Inoxid√°vel</option>
                    <option value="Nylon">Nylon</option>
                </select>

                <label for="quantidade">Quantidade:</label>
                <input type="number" id="quantidade" min="1" value="1">
            </div>

            <button class="btn-add" onclick="adicionarCarrinho()">Adicionar ao Carrinho</button>
        </div>
    </div>

    <div class="carrinho-container" id="carrinho">
        <h2>Seu Carrinho</h2>
        <div id="itens-carrinho"></div>
        <button class="finalizar" id="checkout">Finalizar Compra</button>
    </div>
</main>
<script>
document.addEventListener("DOMContentLoaded", function () {

    /* ===== MENU DROPDOWN ===== */
    const menuBtn = document.getElementById("menu-btn");
    const menuDropdown = document.getElementById("menu-dropdown");
    const couponsBtn = document.getElementById("coupons-btn");

    if (menuBtn && menuDropdown) {
        menuBtn.addEventListener("click", (ev) => {
            ev.stopPropagation();
            menuDropdown.style.display =
                menuDropdown.style.display === "flex" ? "none" : "flex";
        });

        window.addEventListener("click", (e) => {
            if (!menuBtn.contains(e.target) && !menuDropdown.contains(e.target)) {
                menuDropdown.style.display = "none";
            }
        });
    }

    if (couponsBtn) {
        couponsBtn.addEventListener("click", () => {
            window.location.href = "cupons.html";
        });
    }

    /* ===== CARRINHO ===== */
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function saveCart() {
        try {
            localStorage.setItem("cart", JSON.stringify(cart));
        } catch (err) {
            console.warn("N√£o foi poss√≠vel salvar o carrinho no localStorage:", err);
        }
    }

    window.addToCart = function (name, price) {
        cart.push({ name, price });
        saveCart();
        updateCartDisplay();
        alert(name + " foi adicionado ao carrinho!");
    };

    function updateCartDisplay() {
        const container = document.getElementById("cart-items");
        if (!container) return;
        container.innerHTML = "";

        if (cart.length === 0) {
            container.innerHTML = "<p style='text-align:center;'>Seu carrinho est√° vazio!</p>";
        } else {
            cart.forEach((item, i) => {
                container.innerHTML += `
                    <div style="border-bottom:1px solid #ccc; padding:8px 0;">
                        <strong>${item.name}</strong><br>
                        R$ ${Number(item.price).toFixed(2)}
                    </div>
                `;
            });
        }

        const total = cart.reduce((sum, item) => sum + Number(item.price || 0), 0);
        const totalEl = document.getElementById("cart-total");
        if (totalEl) totalEl.innerHTML = `<strong>Total: R$ ${total.toFixed(2)}</strong>`;
    }

    /* POPUP CARRINHO */
    const cartPopup = document.getElementById("cart-popup");
    const cartBtn = document.getElementById("cart-btn");
    const closeCartBtn = document.getElementById("close-cart");
    const clearCartBtn = document.getElementById("clear-cart");
    const checkoutBtn = document.getElementById("checkout");

    if (cartBtn) {
        cartBtn.addEventListener("click", () => {
            updateCartDisplay();
            if (cartPopup) cartPopup.style.display = "flex";
        });
    }
    if (closeCartBtn) {
        closeCartBtn.addEventListener("click", () => {
            if (cartPopup) cartPopup.style.display = "none";
        });
    }
    if (clearCartBtn) {
        clearCartBtn.addEventListener("click", () => {
            if (confirm("Deseja realmente limpar o carrinho?")) {
                cart = [];
                saveCart();
                updateCartDisplay();
            }
        });
    }

    /*  
     =========================================================
     üîß CORRE√á√ÉO DO BOT√ÉO "FINALIZAR COMPRA"
     Agora salva o carrinho e envia tudo para finalizar.html
     =========================================================
    */
    if (checkoutBtn) {
        checkoutBtn.addEventListener("click", () => {
            if (cart.length === 0) {
                alert("O carrinho est√° vazio!");
            } else {
                localStorage.setItem("carrinhoFinal", JSON.stringify(cart));
                window.location.href = "finalizar.html";
            }
        });
    }

    /* ===== POPUP CONTA ===== */
    const accountBtn = document.getElementById("account-btn");
    const accountPopup = document.getElementById("account-popup");
    const accountName = document.getElementById("account-name");
    const accountPhone = document.getElementById("account-phone");
    const accountPass = document.getElementById("account-pass");
    const closeAccountBtn = document.getElementById("close-account");

    if (accountBtn) {
        accountBtn.addEventListener("click", () => {
            if (accountName) accountName.textContent = localStorage.getItem("accountName") || "Usu√°rio";
            if (accountPhone) accountPhone.textContent = localStorage.getItem("accountPhone") || "(00) 00000-0000";
            if (accountPass) accountPass.textContent = localStorage.getItem("accountPass") || "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢";
            if (accountPopup) accountPopup.style.display = "flex";
        });
    }

    window.fecharConta = function () {
        if (accountPopup) accountPopup.style.display = "none";
    };

    /*
     =========================================================
     üîß CORRE√á√ÉO DO "TROCAR CONTA"
     Agora abre index.html ‚Äî sem apagar nada do armazenamento
     =========================================================
    */
    window.trocarConta = function () {
        window.location.href = "index.html";
    };

    /* ===== CARROSSEL ===== */
    const carouselImages = [
        "https://m.media-amazon.com/images/I/71OWLxOqTPL.jpg",
        "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSV2o9J6yZbamu7JH72Aqq-VDW2t6_5CM3wdwb6TtK7BQJxhk4y0H4g2gDWYmdOBHnpC4TO91cLIBiZJ8z6_uaGN3J2FGCPx-xrTsvL_MZZKYhrBqrY2cBBiuk",
        "https://down-br.img.susercontent.com/file/sg-11134201-7ra3f-m50llz0oztw74f",
        "https://cf.shopee.com.br/file/br-11134207-7r98o-m76a9f6kg1807c",
        "https://down-br.img.susercontent.com/file/cn-11134207-7ras8-m1ozbbaxput08e",
        "https://a-static.mlcdn.com.br/%7Bw%7Dx%7Bh%7D/relogio-smart-watch-x8-pro-max-a-prova-d-agua-tecnologia-de-ponta-hapes/hapes/x8-promax-r-16/a48d1a9e227d00e436709225eca91ea3.jpeg"
    ];

    let currentIndex = 0;
    const carouselImg = document.getElementById("carousel-img");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    let autoplayIntervalId = null;

    function setInitialImage() {
        if (!carouselImg) return;
        const url = carouselImages[0] || '';
        carouselImg.src = url;
    }

    function showImage(index) {
        if (!carouselImg) return;
        if (index < 0 || index >= carouselImages.length) return;
        try {
            carouselImg.style.opacity = 0;
        } catch (err) {}
        setTimeout(() => {
            if (!carouselImg) return;
            carouselImg.src = carouselImages[index];
            try {
                carouselImg.style.opacity = 1;
            } catch (err) {}
        }, 150);
    }

    if (prevBtn) {
        prevBtn.addEventListener("click", () => {
            currentIndex = (currentIndex - 1 + carouselImages.length) % carouselImages.length;
            showImage(currentIndex);
            restartAutoplay();
        });
    }
    if (nextBtn) {
        nextBtn.addEventListener("click", () => {
            currentIndex = (currentIndex + 1) % carouselImages.length;
            showImage(currentIndex);
            restartAutoplay();
        });
    }

    function startAutoplay() {
        stopAutoplay();
        autoplayIntervalId = setInterval(() => {
            currentIndex = (currentIndex + 1) % carouselImages.length;
            showImage(currentIndex);
        }, 3500);
    }

    function stopAutoplay() {
        if (autoplayIntervalId !== null) {
            clearInterval(autoplayIntervalId);
            autoplayIntervalId = null;
        }
    }

    function restartAutoplay() {
        startAutoplay();
    }

    const carouselElem = document.getElementById("carousel");
    if (carouselElem) {
        carouselElem.addEventListener("mouseenter", stopAutoplay);
        carouselElem.addEventListener("mouseleave", startAutoplay);
    }

    setInitialImage();
    startAutoplay();

    /* PESQUISA R√ÅPIDA */
    const searchBar = document.getElementById("search-bar");
    if (searchBar) {
        searchBar.addEventListener("keyup", (e) => {
            if (e.target.value.toLowerCase() === "ajuda.sos") {
                alert("Voc√™ ser√° direcionado √† p√°gina");
                e.target.value = "";
            }
        });
    }

    updateCartDisplay();

});
</script>

</body>
</html>
